---
title: 学习笔记161220
date: 2016-12-20 13:02:25
tags: 
  - Material Design
  - Snackbar
  - CoordinatorLayout
  - CardView
  - AppBarLayout
  - CollapsingToolbarLayout
  - SwipRefreshLayout
categories:
  - 学习笔记
  - Android
---
# 知识点

## 温故

1. margin属性中的start和end跟系统语言的文字有关，如果文字布局从左往右，那么end表示右边。

2. android:fitsSystemWindows="true" 表示控件将出现在系统状态栏里

<!--more-->

## 知新

### Material Design

1. app:elevation可以设置material design的高度，翻译elevation: n.海拔。

2. app:elevation的数值越大，高度越大，投影效果越淡；数值越小，高度越小，投影效果越浓。

### Snackbar

1. 可以为Snackbar增加一个点击事件，增加交互性。
```java
Snackbar.make(view,"show message",Snackbar.LENGTH_SHORT)
        .setAciton("Undo",new View.OnClickListener(){
            @Overrider
            public void onClick(View view){
                //Do something what user want
            }
        })
        .show();
```
传入的view对象用于Snackbar查找最外层布局，用于展示Snackbar

2. Undo 是为Snackbar设置了一个交互按钮，按钮的展示文字为"Undo"

### CoordinatorLayout

1. CoordinatorLayout可以监听其所有的子控件的各种事件

### CardView

1. app:cardCornerRadius="5dp"

### AppBarLayout

1. AppBarLayout实际上是一个垂直方向的LinearLayout,内部做了很多滚动事件的封装

2. 使用方法
    1. 将Toolbar嵌套到AppBarLayout中
    2. 如同在一个CoordinatorLayout中，为响应控件制定一个布局行为如：
```xml
app:layout_behavior=“@string/appbar_scrolling_view_behavior”
```
    3.为AppBarLayout中的Toolbar指定响应行为
```xml
<android.support.design.widget.AppBarLayout
    >
    <android.support.v7.widget.Toolbar
        app:layout_scrollFlags="scroll|enterAlways|snap"
    />
android.support.design.widget.AppBarLayout/>    
```
    scroll:      表示当相应控件向上滚动时，Toolbar会跟随着向上移动，必要时隐藏
    enterAlways: 表示当相应控件向下滚动时，Toolbar会跟着向下移动并重新显示
    snap:        表示Toolbar没有完全隐藏或者显示时，根据情况自动选择隐藏或者是显示

### SwipRefreshLayout

1. 将 RecylerView 嵌套到 SwipRefreshLayout 中
2. 为 SwipRefreshLayout 设置属性和绑定监听器

```java
SwipRefreshLayout mSwipRefreshLayout;
...
mSwipRefreshLayout.setColorSchemeResources(R.color.colorPrimary);
mSwipRefreshLayout.setOnRefreshListener(new SwipRefreshLayout.
    OnRefreshListener(){
        @Overrider
        public void onRefresh(){
            refreshData();
        }
    });
}

private void refreshData(){
    new Thread(new Runnable()){
        @Overrider
        public void run(){
            // do something
            runOnUiThread(new Runnable){
                @Overrider
                public void run(){
                    // 更新数据
                    // updateUIData()
                    mSwipRefreshLayout.setRefreshing(false);//结束下拉刷新
                }
            });    
        };
    }).start();
}
```

### CollapsingToolbarLayout 定制标题栏

1. 只能作为 AppBarLayout 的直接子布局来使用，而且 AppBarlayout 必须时 CoordinatorLayout 的子布局

2. 例

```xml
<android.support.design.widget.CollapsingToolbarLayout
    ...
    android:theme="@style/ThemeOverlay.AppCompat.Dark.ActionBar"
    <!-- 制定 CollapsingToolbarLayout 在趋于折叠状态以及折叠之后的背景色 -->
    app:contentScrim="?attr/colorPrimary"
    app:layout_scrollFlags="scroll|enterAlways|snap">
    <ImageView
        app:layout_collapseMode="parallax"/>
    <android.support.v7.widget.Toolbar
        app:layout_collapseMode="pin"/>    
</android.support.design.widget.CollapsingToolbarLayout>
``` 

### lambda 表达式简解

```java
interface MyListener{
    String doSomething(String a,String b);
}

public void hello(MyListener listener){
    //do something
}
```

```java
hello((a,b) -> {
    String result = a + b;
    return result;
});
```
